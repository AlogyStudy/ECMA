<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  
  <script>

    // 千分符
    var str = '9335673817'; // 9,335,673,817

    // 方法一：
    // var reg = /^(\d{1,3})((?:\d{3})+)$/g;
    // var t = str.replace(reg, function() {
    //   var result1 = arguments[1];
    //   var reslut2 = arguments[2];
    //   return result1 + ',' + reslut2.replace(/\d{3}(?!$)/g, function() { // 负向欲查
    //     return arguments[0] + ',';
    //   });
    // });


    // 方法二
    // 倒着数
    // 9,335,673,817 // 10 - 7 - 1
    // 如果字符串的长度 - 索引本身位置 - 1 模 3 == 0 ，则在这个字符串的后边加一个','
    // 在数值的前方加，第一个字符串有需要再次处理。
    // 在数值的后方加，就可以。
    var str = '9335673817'; // 9,335,673,817
    var reg = /\d(?!$)/g;  // (?!$) 不去捕获最后一位
    var str = str.replace(reg, function(r, i){
      console.log(arguments);
      if ((str.length - i - 1) % 3 == 0) {
        return r + ',';
      } else {
        return r;
      }
    });
    console.log(str);

    // 方法3
    // 倒序处理
    str = str.split('').reverse().join('');
    str = str.replace(/(\d{3}(?!$))/g, '$1,');
    str = str.split('').reverse().join('');

        
  </script>

</body>
</html>